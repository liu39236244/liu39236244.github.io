# mybatis  

## 内容

![](assets/000/01/02/12/01/01-1617714058478.png)

## 传统jdbc 弊端


### mybatis 框架

![](assets/000/01/02/12/01/01-1617714870323.png)

最基础的jdbc 连接代码

![](assets/000/01/02/12/01/01-1617714728107.png)

![](assets/000/01/02/12/01/01-1617714685435.png)

### 自行设定mybatis 大体

![](assets/000/01/02/12/01/01-1617715968857.png)


##  源码验证 

>  宏观》围观》图解

> 1 mybatis 如何获取数据源




![](assets/000/01/02/12/01/01-1617716338945.png)

![](assets/000/01/02/12/01/01-1617716387225.png)


parse方法只会执行一次

![](assets/000/01/02/12/01/01-1617716453167.png)

root:就是 jdbc 配置的 xml 内容

![](assets/000/01/02/12/01/01-1617716564063.png)





> 1 mybatis 如何获取sql


![](assets/000/01/02/12/01/01-1617717314765.png)


![](assets/000/01/02/12/01/01-1617717432749.png)



## 如何获取数据源以及sql 语句 

![](assets/000/01/02/12/01/01-1618129681679.png)

![](assets/000/01/02/12/01/01-1618129411785.png)



## mybatis缓存


缓存：

![](assets/000/01/02/12/01/01-1618131731763.png)


不能用缓存太多，因为会有缓存一致性问题
一级
二级


###  缓存key 组合结构：



![](assets/000/01/02/12/01/01-1618131964922.png)


![](assets/000/01/02/12/01/01-1618131993332.png)


###  1 2 级缓存实现原理


> 三个list 

![](assets/000/01/02/12/01/01-1618132598803.png)


1 columnNames 存储的字段：对应的是sql 语句查询的数据库中的字段名

![](assets/000/01/02/12/01/01-1618132703603.png)


2 jdbcTypes ：对应的是查询语句中各个字段数据类型

![](assets/000/01/02/12/01/01-1618132758929.png)


3 classNames ： 数据表中字段对应的java 类型

![](assets/000/01/02/12/01/01-1618132840689.png)



> 2 品一下orm框架核心 


![](assets/000/01/02/12/01/01-1618132965739.png)



## mybatis 插件原理机制

分布式架构  ；   微服务架构  ；  源码  ； 高并发

性能调优
