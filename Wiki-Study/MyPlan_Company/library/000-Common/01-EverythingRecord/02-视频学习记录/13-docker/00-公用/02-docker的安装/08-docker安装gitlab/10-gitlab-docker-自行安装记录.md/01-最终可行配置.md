

https 可以访问的配置

```yml
version: '3'
services:
  gitlab:
    image: 'gitlab/gitlab-ce:latest'
    container_name: 'gitlab'
    restart: always
    hostname: '10.10.66.3'  # 使用localhost或服务器IP
    environment:
      GITLAB_OMNIBUS_CONFIG: |
        external_url 'https://10.10.66.3:2443'  
        # 或使用您的服务器IP
        # 可选：设置初始管理员密码（第一次启动后取消注释并修改）
        gitlab_rails['initial_root_password'] = '6wmhyVFYy0t9PwHTEgW4'
         # 设置SSH端口为2222
        gitlab_rails['gitlab_shell_ssh_port'] = 2222
        # 明确禁用 HTTPS 重定向
        # nginx['redirect_http_to_https'] = false
        # 如果启用 HTTPS，可以添加以下配置

        #external_url 'https://10.10.66.3:2443'
        nginx['listen_port'] = 443
        nginx['listen_https'] = true
        nginx['redirect_http_to_https'] = true

        nginx['ssl_certificate'] = "/etc/gitlab/ssl/gitlab.crt"
        nginx['ssl_certificate_key'] = "/etc/gitlab/ssl/gitlab.key"
    ports:
      - '8081:80'
      - '2443:443'
      - '2222:22'
    volumes:
      - '/home/shenyabo/my-docker/gitlab/config:/etc/gitlab'
      - '/home/shenyabo/my-docker/gitlab/logs:/var/log/gitlab'
      - '/home/shenyabo/my-docker/gitlab/data:/var/opt/gitlab'
      # 如果需要 HTTPS，添加证书目录
      - '/home/shenyabo/my-docker/gitlab/ssl:/etc/gitlab/ssl'
```


http可以访问的配置

```yml
version: '3'
services:
  gitlab:
    image: 'gitlab/gitlab-ce:latest'
    container_name: 'gitlab'
    restart: always
    # 使用localhost或服务器IP
    hostname: '10.10.66.3' 
    environment:
      GITLAB_OMNIBUS_CONFIG: |
        external_url 'http://10.10.66.3:8081'  
        # 可选：设置初始管理员密码（第一次启动后取消注释并修改）
        gitlab_rails['initial_root_password'] = '6wmhyVFYy0t9PwHTEgW4'
        # 明确禁用 HTTPS 相关配置
        nginx['redirect_http_to_https'] = false
        nginx['listen_https'] = false
        # 确保只监听 HTTP
        nginx['listen_port'] = 80
        # 或使用您的服务器IP
        # 设置SSH端口为2222
        gitlab_rails['gitlab_shell_ssh_port'] = 2222
        # 明确禁用 HTTPS 重定向
        # nginx['redirect_http_to_https'] = false
        # 如果启用 HTTPS，可以添加以下配置
        # external_url 'https://10.10.66.3:2443'
        # nginx['listen_port'] = 443
        # nginx['listen_https'] = true
        # nginx['redirect_http_to_https'] = true
        # nginx['ssl_certificate'] = "/etc/gitlab/ssl/gitlab.crt"
        # nginx['ssl_certificate_key'] = "/etc/gitlab/ssl/gitlab.key"
    ports:
      - '8081:80'
    #   - '2443:443'
      - '2222:22'
    volumes:
      - '/home/shenyabo/my-docker/gitlab/config:/etc/gitlab'
      - '/home/shenyabo/my-docker/gitlab/logs:/var/log/gitlab'
      - '/home/shenyabo/my-docker/gitlab/data:/var/opt/gitlab'
      # 如果需要 HTTPS，添加证书目录
    #   - '/home/shenyabo/my-docker/gitlab/ssl:/etc/gitlab/ssl'
```

root

6wmhyVFYy0t9PwHTEgW4