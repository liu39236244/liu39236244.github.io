那太好了！Windows Server 2012 R2 是一个非常经典的服务器操作系统，它的 NFS 功能非常成熟和稳定，而且界面比 Windows 11 要直接得多。

你说找不到，很可能只是因为**角色服务没有被完全安装**。我们从头走一遍，你跟着核对一下，肯定能找到。

---

### Windows Server 2012 R2 配置 NFS 共享的完整指南

#### 步骤一：确认并安装 NFS 服务器角色 (最可能的原因)

在 Windows Server 2012 R2 中，功能是以“角色”和“服务”的形式安装的。如果你找不到 NFS 相关的选项，大概率是这个角色没装或者没装全。

1.  **打开“服务器管理器”**:
    *   这是管理服务器的核心工具，通常开机后会自动启动。如果没启动，可以从开始菜单找到它。

2.  **添加角色和功能**:
    *   在“服务器管理器”仪表板的右上角，点击“**管理**”(Manage) -> “**添加角色和功能**”(Add Roles and Features)。

    

3.  **跟随向导**:
    *   **开始之前 (Before you begin)**: 直接点击“下一步”。
    *   **安装类型 (Installation Type)**: 选择“**基于角色或基于功能的安装**”(Role-based or feature-based installation)，点击“下一步”。
    *   **服务器选择 (Server Selection)**: 确认选中的是“**从服务器池中选择服务器**”并且下面列表里是你当前的服务器。点击“下一步”。
    *   **服务器角色 (Server Roles)**: **这是关键步骤！**
        *   在角色列表中，向下滚动，找到并展开 "**文件和存储服务**" (File and Storage Services)。
        *   再展开下一级的 "**文件和 iSCSI 服务**" (File and iSCSI Services)。
        *   在里面，找到并勾选 "**NFS 服务器**" (Server for NFS)。

        

        *   当(If)你勾选它时，系统可能会弹出一个对话框，询问是否要添加 NFS 管理所需的工具功能，点击 "**添加功能**" (Add Features)。
    *   **功能 (Features)**: 在这个页面不需要做任何额外选择，直接点击“下一步”。
    *   **确认 (Confirmation)**: 检查一下安装摘要，确认要安装 "Server for NFS"，然后点击“**安装**”(Install)。
    *   等待安装过程完成，然后关闭向导。

**现在，NFS 服务已经完整地安装到你的服务器上了，文件夹属性里肯定会出现 NFS 共享选项卡。**

---

#### 步骤二：创建并共享文件夹 (经典界面，非常直接)

1.  **创建文件夹**:
    *   在你希望存放备份文件的磁盘上，创建一个文件夹，例如 `E:\starrocks_backup`。

2.  **打开属性并配置 NFS 共享**:
    *   右键点击 `E:\starrocks_backup` 文件夹，选择“**属性**”(Properties)。
    *   在弹出的属性窗口中，你应该能清楚地看到一个名叫 “**NFS 共享**” (NFS Sharing) 的选项卡。点击它。

    

3.  **管理 NFS 共享**:
    *   点击 "**管理 NFS 共享...**" (Manage NFS Sharing...) 按钮。
    *   勾选 "**共享此文件夹**" (Share this folder)。
    *   **共享名 (Share name)**: 可以保持默认的 `starrocks_backup`。Linux 端挂载时会用到这个名字。

    

4.  **设置权限 (核心)**:
    *   点击右下角的 "**权限**" (Permissions) 按钮。
    *   默认情况下，所有机器 (`ALL MACHINES`) 可能是“无访问权限”或“只读”。我们需要给 StarRocks 的 BE 节点开通“读写”权限。
    *   **做法一 (简单粗暴但不推荐)**：选中 `ALL MACHINES`，在下面的“访问类型”中选择“**读写**”(Read-Write)。**但这样做意味着内网所有机器都能读写，不安全。**
    *   **做法二 (推荐，精确授权)**:
        *   如果存在 `ALL MACHINES` 规则，先选中它，然后点击 "**删除**" (Remove)。
        *   点击 "**添加**" (Add...)。
        *   在上面的文本框中，输入**第一个 StarRocks BE 节点的 IP 地址**。
        *   在下面的“**访问类型**”(Type of access) 下拉框中，选择 "**读写**" (Read-Write)。
        *   **务必，务必，务必勾选 "允许根访问权限" (Allow root access)**。否则 Linux 客户端挂载会失败或无法写入。

        

        *   点击“确定”。
        *   重复以上“添加”步骤，为**每一个 StarRocks BE 节点**都添加一条拥有“读写”和“允许根访问权限”的规则。

5.  **确认并应用**:
    *   所有 BE 节点的 IP 都添加完毕后，在“NFS 权限”窗口点击“确定”。
    *   回到“NFS 高级共享”窗口，点击“应用”和“确定”。

---

#### 步骤三：检查防火墙

Windows Server 2012 R2 的防火墙通常在安装角色时会自动配置好规则。但以防万一，可以检查一下：
*   打开 "高级安全 Windows 防火墙"。
*   在“入站规则”里，确保与“网络文件系统 (NFS)”相关的规则是启用的。

**现在，你的 Windows Server 2012 R2 已经是一个配置完善的 NFS 服务器了。** 接下来的步骤就是回到 Linux BE 节点上进行挂载，流程和我之前说的一样。

我想这次你应该能顺利找到所有选项了。如果还是找不到 "NFS 共享" 选项卡，那几乎 100% 是步骤一的角色服务没有安装成功，请务必仔细检查那一步。



