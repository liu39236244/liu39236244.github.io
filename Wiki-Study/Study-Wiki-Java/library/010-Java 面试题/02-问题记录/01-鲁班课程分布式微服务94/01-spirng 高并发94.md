# 线程问题

JMM模型： java 线程内存模型

![](assets/010/02/01/01-1608121931844.png)
![](assets/010/02/01/01-1608121962813.png)

![](assets/010/02/01/01-1608121902392.png)


> 1 不跳出循环

while(flag){
    i++;
}

> 2 跳出循环

![](assets/010/02/01/01-1608122829185.png)

> 3  内存失效，如果一个变量长时间不用，flag 就会更新
停止微妙
![](assets/010/02/01/01-1608122956236.png)

> 4 如何解决？ 

volatile 可见性， 改了不同线程的值，别的线程会检测出来

![](assets/010/02/01/01-1608123483469.png)

mesi 也是没办法保证线程安全；

![](assets/010/02/01/01-1608124797245.png)


## 书籍

并发编程基础概念

![](assets/010/02/01/01-1608126183714.png)